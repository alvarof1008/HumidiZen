<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HumidiZen</title>
    <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://unpkg.com/gsap@3.12.2/dist/gsap.min.js"></script>
    <style>
      body, html {
        margin: 0;
        height: 100%;
        overflow: hidden;
        background: #000;
        font-family: "Arial", sans-serif;
      }

      .overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: radial-gradient(circle at center, #111 0%, #000 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        color: white;
        transition: opacity 1s ease;
        z-index: 10;
      }

      .enter-btn {
        padding: 15px 30px;
        font-size: 18px;
        cursor: pointer;
        background: white;
        color: black;
        border: none;
        border-radius: 8px;
        margin-top: 20px;
        transition: background 0.3s;
      }

      .enter-btn:hover {
        background: #ddd;
      }

      h1 {
        font-size: 28px;
        letter-spacing: 2px;
      }

      canvas {
        display: block;
      }
    </style>
  </head>

  <body>
    <div class="overlay">
      <h1>Bienvenido a HumidiZen</h1>
      <button class="enter-btn">Entrar a la tienda</button>
    </div>

    <canvas id="scene"></canvas>

    <script>
      // Inicializa la escena
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById("scene"), antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0x000000);

      // Luz ambiental
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
      scene.add(ambientLight);

      // Luz direccional
      const light = new THREE.PointLight(0xffffff, 1);
      light.position.set(5, 5, 5);
      scene.add(light);

      // Base (mesa simple)
      const planeGeometry = new THREE.CylinderGeometry(3, 3, 0.3, 32);
      const planeMaterial = new THREE.MeshStandardMaterial({ color: 0x222222 });
      const plane = new THREE.Mesh(planeGeometry, planeMaterial);
      scene.add(plane);

      // Humidificador (cilindro blanco)
      const humidGeometry = new THREE.CylinderGeometry(0.5, 0.5, 1.2, 32);
      const humidMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff });
      const humidifier = new THREE.Mesh(humidGeometry, humidMaterial);
      humidifier.position.y = 0.9;
      scene.add(humidifier);

      // "Humo" con partículas
      const smokeParticles = [];
      const smokeGeometry = new THREE.SphereGeometry(0.1, 8, 8);
      const smokeMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.4 });

      for (let i = 0; i < 60; i++) {
        const particle = new THREE.Mesh(smokeGeometry, smokeMaterial.clone());
        particle.position.set(
          (Math.random() - 0.5) * 0.2,
          1.4 + Math.random() * 0.2,
          (Math.random() - 0.5) * 0.2
        );
        smokeParticles.push(particle);
        scene.add(particle);
      }

      camera.position.set(0, 1.5, 4);

      // Animación del humo
      function animateSmoke() {
        smokeParticles.forEach(p => {
          p.position.y += 0.01;
          p.material.opacity -= 0.001;
          if (p.material.opacity <= 0) {
            p.position.y = 1.4;
            p.material.opacity = 0.4;
          }
        });
      }

      // Bucle de renderizado
      function animate() {
        requestAnimationFrame(animate);
        humidifier.rotation.y += 0.005;
        animateSmoke();
        renderer.render(scene, camera);
      }
      animate();

      // Responsividad
      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });

      // Botón: quitar overlay y mostrar animación
      document.addEventListener("DOMContentLoaded", () => {
        const overlay = document.querySelector(".overlay");
        const button = document.querySelector(".enter-btn");

        button.addEventListener("click", () => {
          gsap.to(overlay, {
            opacity: 0,
            duration: 1.5,
            onComplete: () => {
              overlay.style.display = "none";
            }
          });
        });
      });
    </script>
  </body>
</html>
